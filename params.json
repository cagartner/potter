{"name":"Potter","tagline":"Conjunto de ferramentas que ajudam a criar sites WordPress mais facilmente.","body":"Potter\r\n======\r\nConjunto de ferramentas que ajudam a criar sites WordPress mais facilmente.\r\n\r\n> Potter ainda esta em fase beta\r\n\r\n# Instalação\r\n\r\nNo seu `composer.json`\r\n\r\n```\r\n    \"require\": {\r\n      \"potterywp/potter\": \"1.*\"\r\n   },\r\n```\r\n\r\nNo seu `functions.php`\r\n\r\n```php\r\n   require_once \"vendor/autoload.php\";\r\n```\r\n\r\n# Características\r\n\r\n- **Post/Type** - Crie custom posts types com facilidade e flexibilidade\r\n- **ThemeOptions** - Opções de tema ficam faceis de serem criados. Potter usa um wrapper para [option-tree](https://github.com/valendesigns/option-tree), melhorando ainda mais o fluxo de desenvolvimento.\r\n- **Features** - Potter possui uma série de helpers que facilitão a inclusisão de recursos nos seus projetos com Wordpress, como a inclusão de css e javascript com facilidade em suas páginas.\r\n\r\n## Features\r\n\r\nPara usar o Features insira o seguinte código em seu `functions.php` logo após `require_once \"vendor/autoload.php\";`\r\nA vantagem de usar as funções do Features é o ganho em organização e otimização, já que em poucas linhas você tem vários recursos do WP que você teria que separar em vários arquivos para manter organizado. Potter se encarrega de carregar os comandos apenás quando eles são nescessários.\r\n\r\n\r\n```php\r\nuse Potter\\Potter;\r\n\r\n$features = Potter::features();\r\n```\r\n\r\n### Menu\r\n\r\nAdcione menus ao seu tema\r\n\r\n```php\r\n// $features->addMenu($location, $description);\r\n$features->addMenu('main', 'Menu Principal');\r\n```\r\n\r\n### Theme Support\r\n\r\n```php\r\n// $features->addThemeSupport($feature, $arguments = array());\r\n$features->addThemeSupport('post-thumbnails');\r\n$features->addThemeSupport('post-formats');\r\n```\r\n\r\n### Post Type Support\r\n\r\n```php\r\n// $features->addPostTypeSupport($post_type, $feature)\r\n$features->addPostTypeSupport('page', 'excerpt');\r\n```\r\n\r\n### Image Size\r\n\r\n```php\r\n// $features->addImageSize($name, $width = 0, $height = 0, $crop = false);\r\n$features->addImageSize('thumb-home', 300, 300, true);\r\n$features->addImageSize('thumb-page', 248, 888, true);\r\n$features->addImageSize('thumb-contact', 460, 400, false);\r\n```\r\n\r\n### Assets\r\n\r\nAdcione e organize arquivos css e js com facilidade.\r\n\r\n#### CSS\r\n\r\n```php\r\n// $features->addCss($handle, $src = false, $deps = array(), $ver = null, $media = 'all');\r\n$features->addCss('gfonts', 'http://fonts.googleapis.com/css?family=Rosario:400,700');\r\n$features->addCss('main', 'assets/pub/css/main.css');\r\n```\r\n\r\n### JS\r\n\r\n```php\r\n// $features->addJs($handle, $src, $deps = array(), $ver = null, $in_footer = false);\r\n// $features->addJsToHead($handle, $src, $deps = array(), $ver = null);\r\n// $features->addJsToFooter($handle, $src, $deps = array(), $ver = null);\r\n\r\n$features->addJsToHead('modernizr', 'assets/pub/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js');\r\n$features->addJsToFooter('app', 'assets/pub/js/app.js');\r\n```\r\n\r\n#### jQuery CDN\r\nDefina qual a versão de jQuery você esta usando. Potter vai ajustar todas as configurações nescessárias automaticamente.\r\n\r\n```php\r\n// $features->setJqueryCDNSupport($version, $fallback = null, $migrate = null, $in_footer = false);\r\n$features->setJqueryCDNSupport('2.1.1', 'assets/pub/js/vendor/jquery-2.1.1.min.js', 'assets/pub/js/vendor/jquery-migrate-1.2.1.min.js');\r\n```\r\n> Alem de definir a versão do jQuery que você quer, você pode definir o seu fallback (caso o cdn não carregue) e ainda definir o jQuery migrate.\r\n\r\n## Google Analytcs\r\n\r\nAdcione o código de rastreamento do Google Analytcs no tema com apenas uma linha de código.\r\n\r\n```php\r\n// $features->setGoogleAnalytcsID($id);\r\n$features->setGoogleAnalytcsID('A1-XXXXXX');\r\n```\r\n\r\n## Login Logo\r\n\r\nMude a imagem de login do Wordpress (d+ não?)\r\n\r\n```php\r\n// $features->setLoginLogo($logo, $style = array());\r\n$features->setLoginLogo('assets/pub/imgs/login-logo.png', array('width'=>'150px'));\r\n```\r\n\r\n\r\n## Opções do tema\r\n\r\nTrabalhar com sites feitos em WP é muito bom, porém há momentos que precisamos deixar determinados recursos mais flexiveis pelo ambiente do usuário final (o cliente), para isso usamos recursos como o Theme Options.  \r\nHá varias formas de se implementar Theme Options, umas mais faceis e/ou robustas que outras. O plugin [option-tree](https://github.com/valendesigns/option-tree) é uma exelente opção para se usar, é facil e flexivel, porém não possui uma interface de desenvolvimento que agrade a todos.  \r\nPor isso o Potter possui um wrapper API que facilita muito o trabalho de desenvolvimento de Theme Options com o option-tree.\r\n\r\n### Criando seu ThemeOptions\r\n\r\n- Crie uma pasta chamada `/app` dentro da raiz do seu tema `/wp-content/themes/meutema/`\r\n- Dentro da pasta `app` crie um arquivo chamado `ThemeOptions.php`\r\n- Dentro de `ThemeOptions.php` coloque o seguinte código:\r\n\r\n ```php\r\n<?php\r\n use Potter\\Theme\\Options;\r\n\r\n class ThemeOptions extends Options\r\n {\r\n    protected $page_title = 'Opções do Tema';\r\n    protected $menu_title = 'Opções do Tema';\r\n    protected $settings_id = 'my_theme_options_id';\r\n\r\n    public function doRegister()\r\n    {\r\n    }\r\n }\r\n```\r\n\r\n> No momento que o Potter inicializar suas configurações ele automaticamente cria uma instancia de `ThemeOptions` então você não precisa fazer mais nada alem de criar o arquivo e colocar suas configurações lá.\r\n\r\n### Configurações adcionais\r\n\r\nVocê ainda tem mais opções disponiveis, que te permitiram custumizar melhor seu ThemeOptions\r\n ```php\r\n class ThemeOptions extends Options\r\n {\r\n    protected $page_title = 'Theme Options';\r\n    protected $menu_title = 'Theme Options';\r\n    protected $settings_id = 'theme_options';\r\n    protected $header_logo = null;\r\n    protected $header_version_text = null;\r\n    protected $header_logo_link = null;\r\n    protected $show_new_layout = false;\r\n    protected $show_docs = false;\r\n    protected $show_pages = false;\r\n    protected $options_capability = 'edit_theme_options';\r\n\r\n    protected $contextual_help\r\n        = array(\r\n            'content' => array(),\r\n            'sidebar' => ''\r\n        );\r\n\r\n```\r\n\r\n\r\n### Adcionando opções\r\n\r\nTodas os campos/opções são executados dentro de `doRegister()`\r\n\r\n ```php\r\n public function doRegister()\r\n {\r\n    // Primeiro você cria a seção\r\n    $this->addSection('general', 'Geral')\r\n        // depois você adcionar as opções, que são automaticamente inseridas na devida seção\r\n        ->addUpload('logo', 'Logo')\r\n        ->addText('header_slogan', 'Header Slogan');\r\n    \r\n    $this->addSection('another_section', 'Another')\r\n        ->addTextArea('text_impact', 'Text impact')\r\n        ->addPageSelect('my_page_id', 'Select Page');\r\n    \r\n    \r\n    // Você não é obrigado a encadear os metodos\r\n    $this->addSection('more_section', 'GoT');\r\n    $this->addCustomPostTypeSelect('my_got_id','Select GoT', 'Desc of select', 'got');\r\n    $this->addCategorySelect('my_cat_id','Select GoT', 'Desc of select', 'got');\r\n    // As as opções são anexadas automaticamente a última seção configurada.\r\n    \r\n }\r\n```\r\n\r\n#### Opções disponíveis\r\n\r\n- **addText**   \r\n   `$this->addText($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *text*\r\n- **addTextarea**   \r\n    `addTextarea($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *textarea*\r\n- **addSelect**    \r\n   `$this->addSelect($id, $label, array $choices, $desc = null, $std = null, $section = null, array $extra = array())` *field of type select.*\r\n- **addCheckbox**     \r\n    `$this->addCheckbox($id, $label, array $choices, $desc = null, $std = null, $section = null, array $extra = array())` *field of type checkbox.*\r\n- **addRadio**  \r\n    `$this->addRadio($id, $label, array $choices, $desc = null, $std = null, $section = null, array $extra = array())` *field of type radio.*\r\n- **addWYSIWYG**  \r\n    `$this->addWYSIWYG($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *WYSIWYG*\r\n- **addUpload**  \r\n    `$this->addUpload($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *upload (image)*\r\n- **addCustomPostTypeSelect**  \r\n    `$this->addCustomPostTypeSelect($id, $label, $desc = null, $postType = 'post', $std = null, $section = null, array $extra = array())` *select type field with custom post type*  \r\n- **addCustomPostTypeCheckbox**   \r\n    `$this->addCustomPostTypeCheckbox($id, $label, $desc = null, $postType = 'post', $std = null, $section = null, array $extra = array())` *checkbox type field with custom post type*  \r\n- **addPageSelect**  \r\n   `$this->addPageSelect($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *select type field with post type page*\r\n- **addPageCheckbox**  \r\n   `$this->addPageCheckbox($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *checkbox type field with post type page*\r\n- **addPostCheckbox**  \r\n   `$this->addPageCheckbox($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *checkbox type field with post type post*\r\n- **addPostSelect**  \r\n   `$this->addPostSelect($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *select type field with post type post*\r\n- **addTaxonomySelect**  \r\n   `$this->addTaxonomySelect($id, $label, $desc = null, $taxonomy = 'category', $std = null, $section = null, array $extra = array())` *select type field with taxonomy*\r\n- **addTaxonomyCheckbox**  \r\n   `$this->addTaxonomyCheckbox($id, $label, $desc = null, $taxonomy = 'category', $std = null, $section = null, array $extra = array())` *checkbox type field with taxonomy*\r\n- **addCategorySelect**  \r\n   `$this->addCategorySelect($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *select type field with categories*\r\n- **addCategoryCheckbox**  \r\n   `$this->addCategoryCheckbox($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *checkbox type field with categories*\r\n- **addTagSelect**  \r\n   `$this->addTagSelect($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *select type field with tags*\r\n- **addTagCheckbox**  \r\n   `$this->addTagCheckbox($id, $label, $desc = null, $std = null, $section = null, array $extra = array())` *checkbox type field with tags*\r\n- **addTypography**  \r\n   `$this->addTypography($id, $label, $desc = null, $std = null, $section = null, array $extra = array())`\r\n- **addOnOff**  \r\n   `$this->addOnOff($id, $label, $desc = null, $std = null, $section = null, array $extra = array())`\r\n- **addOption**  \r\n   `$this->addOption(array $args)` Raw data for option.\r\n\r\n\r\n### Recuperando opções\r\n\r\nRecuperar os dados salvos no ThemeOptions é muito fácil.\r\n\r\n```php\r\n\r\n$option_name = OPT::get('option_name', 'default_value');\r\n\r\nOPT::_get('option_name', 'default_value'); // echo OPT::get('option_name', 'default_value');\r\n\r\n$option = OPT::get_nl2br('option_name', 'default_value'); // $option =  nl2br(OPT::get('option_name', 'default_value'));\r\n\r\nOPT::_get_nl2br('option_name', 'default_value') // echo nl2br(OPT::get('option_name', 'default_value'));\r\n\r\n```\r\n\r\n## Post Types / Models\r\n\r\nNão são raros os momentos onde precisamos criar custom post para atender as exigencias dos projetos.  \r\nPotter possui uma API que tem como objetivo facilitar esse trabalho, que as vezes tende a ser chato e complicado. \r\n\r\nA API do Potter foi feita sobre o [Super-CTP](https://github.com/mboynes/super-cpt)\r\n\r\n### Criando um PostType\r\n\r\nCrie uma pasta chamada `/app/models` dentro da raiz do seu tema `/wp-content/themes/meutema/`   \r\nDentro da pasta `/app/models` você vai criar um arquivo/classe para cada post type que deseja criar, a classe deve possuir o mesmo nome que o arquivo.\r\n\r\n> Por conversão use *CamelCase* para criar as classes, e para melhor identifica-lás acressente *Type* ou *Model* ao final do nome.  \r\nEx: `SliderModel.php` ou `SliderType.php`   \r\nO Potter automaticamente criará o post type 'slider'\r\n\r\n\r\n\r\n`SliderType.php`\r\n\r\nO conteúdo do arquivo deve ficar assim:\r\n\r\n```php\r\n<?php\r\n\r\nuse Potter\\Post\\Type;\r\n\r\nclass SliderType extends Type\r\n{\r\n\tprotected $supports = array('title', 'thumbnail');\r\n\tprotected $public = false;\r\n\tprotected $show_ui = true;\r\n\tpublic $icon = 'picture-o';\r\n}\r\n```\r\n\r\n### Configurações disponiveis\r\nHá ainda várias configurações disponiveis.\r\n\r\n```php\r\n<?php\r\n\r\nuse Potter\\Post\\Type;\r\n\r\nclass SliderType extends Type\r\n{\r\n    public $type = 'carrocel'; // força o post type da classe\r\n    protected $taxonomies = array();\r\n    protected $labels = array();\r\n    protected $capabilities = array();\r\n    protected $args = array();\r\n    protected $supports = array();\r\n    public $icon = 'dashicons-admin-post';\r\n    protected $capability_type = 'page';\r\n    protected $public;\r\n    protected $show_ui;\r\n    protected $description;\r\n    protected $route;\r\n    protected $queryArgs = array();\r\n\r\n    protected $meta_boxes = array();\r\n}\r\n```\r\n\r\nVocê pode extender qualquer atributo ou método da classe [`Super_Custom_Post_Type.php`](https://github.com/mboynes/super-cpt/blob/master/includes/class-super-custom-post-type.php)\r\n\r\n### Meta-Boxes\r\nO próprio Super-CTP possui um sistema de meta-boxes, porem ele é um pouco limitado. Potter usa o plugin  [meta-box](https://github.com/rilwis/meta-box) que proporciona muito mais flixebilidade e opções.\r\n\r\nPara cadastrar uma meta-box a um post-type acressente as opções desejadas ao atributo `$meta_boxex`  \r\n\r\n```php\r\nprotected $meta_boxes\r\n        = array(\r\n            'metabox-id' => array(\r\n                'title' => 'Dados do slider',\r\n                'fields' => array(\r\n                    array(\r\n                        'name' => 'link',\r\n                        'id' => 'link',\r\n                        'type' => 'text',\r\n                        'clone' => false,\r\n                    ),\r\n                    array(\r\n                        'name' => 'Target',\r\n                        'id' => 'target',\r\n                        'type' => 'select',\r\n                        'options' => array(\r\n                            '_new',\r\n                            '_self',\r\n                        )\r\n                    )\r\n                )\r\n            )\r\n        );\r\n```\r\n\r\nTodas as configurações do [meta-box](https://github.com/rilwis/meta-box) estão disponiveis\r\n\r\n### Post Type Query\r\n\r\nO uso do WP_Query por muitas vezes é complicado, e não fornece uma API muito bonita de de trabalhar. Com o Potter fica muito fácil executar consultas.\r\n\r\n### Instanciando a Query\r\nNo local onde deseja executar a sua consulta, você pode usar o seguinte comando.\r\n\r\n```php\r\n// Retorna um objeto WP_Query\r\n$sliders = \\Potter\\Potter::model('slider')->all(); // passe como parametro o nome do model/post type que você criou\r\n\r\n// Nada muda no seu código\r\nif($query->have_posts()):\r\n    while($query->have_posts()): $query->the_post()\r\n        /// \r\n    endwhile;\r\nendif;\r\n\r\n```\r\n\r\nHá varios métodos disponíveis.\r\n\r\n```php\r\n// Retorna um objeto Potter/Post/ModelQuery\r\n$slidersQuery = \\Potter\\Potter::model('slider'); // passe como parametro o nome do model/post type que você criou\r\n\r\n// Retorna um objeto WP_Query\r\n$slidersQuery->perPage(15)->order('author')->exclude(99)->exe();\r\n\r\n// Retorna um objeto WP_Query\r\n$slidersQuery->perPage(15)->exe();\r\n$slidersQuery->exe($args = array()); // Passe parametros extras diretamente para o WP_Query\r\n$slidersQuery->get(5, $args = array()) // Uma quantidade limitada de resultados\r\n\r\n// Retorna um objeto WP_Query\r\n$slidersQuery->perPage(5)->byParent(9) // Páginas filhas do ID 9\r\n$slidersQuery->perPage(5)->exclude(get_the_ID())->byParent(9) // Páginas filhas do ID 9, menos a página atual\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}